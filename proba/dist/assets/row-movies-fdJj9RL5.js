import{g as Oe,R as f,r as s,a as Ne,j as i,S as W,u as Me,b as Te}from"./index-Z5IVg1gt.js";import{u as ie}from"./movie-service-Cbn3dtH4.js";import le from"./error-jhboLjV9.js";var se={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var n={}.hasOwnProperty;function t(){for(var a="",l=0;l<arguments.length;l++){var c=arguments[l];c&&(a=r(a,o(c)))}return a}function o(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return t.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var l="";for(var c in a)n.call(a,c)&&a[c]&&(l=r(l,c));return l}function r(a,l){return l?a?a+" "+l:a+l:a}e.exports?(t.default=t,e.exports=t):window.classNames=t})()})(se);var Re=se.exports;const O=Oe(Re);function ke(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}else return Array.from(e)}var G=!1;if(typeof window<"u"){var ae={get passive(){G=!0}};window.addEventListener("testPassive",null,ae),window.removeEventListener("testPassive",null,ae)}var ce=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),w=[],B=!1,ue=-1,N=void 0,M=void 0,de=function(n){return w.some(function(t){return!!(t.options.allowTouchMove&&t.options.allowTouchMove(n))})},P=function(n){var t=n||window.event;return de(t.target)||t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)},De=function(n){if(M===void 0){var t=!!n&&n.reserveScrollBarGap===!0,o=window.innerWidth-document.documentElement.clientWidth;t&&o>0&&(M=document.body.style.paddingRight,document.body.style.paddingRight=o+"px")}N===void 0&&(N=document.body.style.overflow,document.body.style.overflow="hidden")},Le=function(){M!==void 0&&(document.body.style.paddingRight=M,M=void 0),N!==void 0&&(document.body.style.overflow=N,N=void 0)},Be=function(n){return n?n.scrollHeight-n.scrollTop<=n.clientHeight:!1},Pe=function(n,t){var o=n.targetTouches[0].clientY-ue;return de(n.target)?!1:t&&t.scrollTop===0&&o>0||Be(t)&&o<0?P(n):(n.stopPropagation(),!0)},$e=function(n,t){if(!n){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!w.some(function(r){return r.targetElement===n})){var o={targetElement:n,options:t||{}};w=[].concat(ke(w),[o]),ce?(n.ontouchstart=function(r){r.targetTouches.length===1&&(ue=r.targetTouches[0].clientY)},n.ontouchmove=function(r){r.targetTouches.length===1&&Pe(r,n)},B||(document.addEventListener("touchmove",P,G?{passive:!1}:void 0),B=!0)):De(t)}},Fe=function(n){if(!n){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}w=w.filter(function(t){return t.targetElement!==n}),ce?(n.ontouchstart=null,n.ontouchmove=null,B&&w.length===0&&(document.removeEventListener("touchmove",P,G?{passive:!1}:void 0),B=!1)):w.length||Le()};function Ke(e=null){let[n,t]=f.useState(e);const{current:o}=f.useRef({current:n});return Object.defineProperty(o,"current",{get:()=>n,set:r=>{Object.is(n,r)||(n=r,t(r))}}),o}function He(e,n={isStateful:!0}){const t=Ke(null),o=s.useRef(null),r=n.isStateful?t:o;return f.useEffect(()=>{!e||(typeof e=="function"?e(r.current):e.current=r.current)}),r}function $(){return $=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},$.apply(this,arguments)}var Ye=function(n){var t=n.classes,o=n.classNames,r=n.styles,a=n.id,l=n.closeIcon,c=n.onClick;return f.createElement("button",{id:a,className:O(t.closeButton,o==null?void 0:o.closeButton),style:r==null?void 0:r.closeButton,onClick:c,"data-testid":"close-button"},l||f.createElement("svg",{className:o==null?void 0:o.closeIcon,style:r==null?void 0:r.closeIcon,width:28,height:28,viewBox:"0 0 36 36","data-testid":"close-icon"},f.createElement("path",{d:"M28.5 9.62L26.38 7.5 18 15.88 9.62 7.5 7.5 9.62 15.88 18 7.5 26.38l2.12 2.12L18 20.12l8.38 8.38 2.12-2.12L20.12 18z"})))},L=typeof window<"u",fe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'];function qe(e){return e.offsetParent===null||getComputedStyle(e).visibility==="hidden"}function Ue(e,n){for(var t=0;t<e.length;t++)if(e[t].checked&&e[t].form===n)return e[t]}function We(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!0;var n=e.form||e.ownerDocument,t=n.querySelectorAll('input[type="radio"][name="'+e.name+'"]'),o=Ue(t,e.form);return o===e||o===void 0&&t[0]===e}function ve(e){for(var n=document.activeElement,t=e.querySelectorAll(fe.join(",")),o=[],r=0;r<t.length;r++){var a=t[r];(n===a||!a.disabled&&Ge(a)>-1&&!qe(a)&&We(a))&&o.push(a)}return o}function ze(e,n){if(!(!e||e.key!=="Tab")){if(!n||!n.contains)return process,!1;if(!n.contains(e.target))return!1;var t=ve(n),o=t[0],r=t[t.length-1];return e.shiftKey&&e.target===o?(r.focus(),e.preventDefault(),!0):!e.shiftKey&&e.target===r?(o.focus(),e.preventDefault(),!0):!1}}function Ge(e){var n=parseInt(e.getAttribute("tabindex"),10);return isNaN(n)?Ve(e)?0:e.tabIndex:n}function Ve(e){return e.getAttribute("contentEditable")}var Je=function(n){var t=n.container,o=n.initialFocusRef,r=s.useRef();return s.useEffect(function(){var a=function(v){t!=null&&t.current&&ze(v,t.current)};if(L&&document.addEventListener("keydown",a),L&&(t!=null&&t.current)){var l=function(){fe.findIndex(function(v){var h;return(h=document.activeElement)==null?void 0:h.matches(v)})!==-1&&(r.current=document.activeElement)};if(o)l(),requestAnimationFrame(function(){var d;(d=o.current)==null||d.focus()});else{var c=ve(t.current);c[0]&&(l(),c[0].focus())}}return function(){if(L){var d;document.removeEventListener("keydown",a),(d=r.current)==null||d.focus()}}},[t,o]),null},E=[],z={add:function(n){E.push(n)},remove:function(n){E=E.filter(function(t){return t!==n})},isTopModal:function(n){return!!E.length&&E[E.length-1]===n}};function Qe(e,n){s.useEffect(function(){return n&&z.add(e),function(){z.remove(e)}},[n,e])}var Xe=function(n,t,o,r,a){var l=s.useRef(null);s.useEffect(function(){return t&&n.current&&r&&(l.current=n.current,$e(n.current,{reserveScrollBarGap:a})),function(){l.current&&(Fe(l.current),l.current=null)}},[t,o,n,r,a])},m={root:"react-responsive-modal-root",overlay:"react-responsive-modal-overlay",overlayAnimationIn:"react-responsive-modal-overlay-in",overlayAnimationOut:"react-responsive-modal-overlay-out",modalContainer:"react-responsive-modal-container",modalContainerCenter:"react-responsive-modal-containerCenter",modal:"react-responsive-modal-modal",modalAnimationIn:"react-responsive-modal-modal-in",modalAnimationOut:"react-responsive-modal-modal-out",closeButton:"react-responsive-modal-closeButton"},Ze=f.forwardRef(function(e,n){var t,o,r,a,l=e.open,c=e.center,d=e.blockScroll,v=d===void 0?!0:d,h=e.closeOnEsc,C=h===void 0?!0:h,T=e.closeOnOverlayClick,F=T===void 0?!0:T,j=e.container,x=e.showCloseIcon,K=x===void 0?!0:x,g=e.closeIconId,H=e.closeIcon,R=e.focusTrapped,Y=R===void 0?!0:R,b=e.initialFocusRef,me=b===void 0?void 0:b,V=e.animationDuration,J=V===void 0?300:V,u=e.classNames,p=e.styles,Q=e.role,he=Q===void 0?"dialog":Q,pe=e.ariaDescribedby,ye=e.ariaLabelledby,ge=e.containerId,be=e.modalId,q=e.onClose,X=e.onEscKeyDown,Z=e.onOverlayClick,_=e.onAnimationEnd,we=e.children,xe=e.reserveScrollBarGap,ee=He(n),k=s.useRef(null),S=s.useRef(null),y=s.useRef(null);y.current===null&&L&&(y.current=document.createElement("div"));var ne=s.useState(!1),A=ne[0],te=ne[1];Qe(k,l),Xe(k,l,A,v,xe);var Ce=function(){y.current&&!j&&!document.body.contains(y.current)&&document.body.appendChild(y.current),document.addEventListener("keydown",oe)},Se=function(){y.current&&!j&&document.body.contains(y.current)&&document.body.removeChild(y.current),document.removeEventListener("keydown",oe)},oe=function(D){D.keyCode!==27||!z.isTopModal(k)||(X==null||X(D),C&&q())};s.useEffect(function(){return function(){A&&Se()}},[A]),s.useEffect(function(){l&&!A&&(te(!0),Ce())},[l]);var Ee=function(D){if(S.current===null&&(S.current=!0),!S.current){S.current=null;return}Z==null||Z(D),F&&q(),S.current=null},U=function(){S.current=!1},je=function(){l||te(!1),_==null||_()},re=j||y.current,Ae=l?(t=u==null?void 0:u.overlayAnimationIn)!=null?t:m.overlayAnimationIn:(o=u==null?void 0:u.overlayAnimationOut)!=null?o:m.overlayAnimationOut,Ie=l?(r=u==null?void 0:u.modalAnimationIn)!=null?r:m.modalAnimationIn:(a=u==null?void 0:u.modalAnimationOut)!=null?a:m.modalAnimationOut;return A&&re?Ne.createPortal(f.createElement("div",{className:O(m.root,u==null?void 0:u.root),style:p==null?void 0:p.root,"data-testid":"root"},f.createElement("div",{className:O(m.overlay,u==null?void 0:u.overlay),"data-testid":"overlay","aria-hidden":!0,style:$({animation:Ae+" "+J+"ms"},p==null?void 0:p.overlay)}),f.createElement("div",{ref:k,id:ge,className:O(m.modalContainer,c&&m.modalContainerCenter,u==null?void 0:u.modalContainer),style:p==null?void 0:p.modalContainer,"data-testid":"modal-container",onClick:Ee},f.createElement("div",{ref:ee,className:O(m.modal,u==null?void 0:u.modal),style:$({animation:Ie+" "+J+"ms"},p==null?void 0:p.modal),onMouseDown:U,onMouseUp:U,onClick:U,onAnimationEnd:je,id:be,role:he,"aria-modal":"true","aria-labelledby":ye,"aria-describedby":pe,"data-testid":"modal",tabIndex:-1},Y&&f.createElement(Je,{container:ee,initialFocusRef:me}),we,K&&f.createElement(Ye,{classes:m,classNames:u,styles:p,closeIcon:H,onClick:q,id:g})))),re):null});function _e({movieId:e}){const[n,t]=s.useState(null),{getDetailedMovie:o,loading:r,error:a}=ie(),l=()=>{e&&o(e).then(C=>t(C))};s.useEffect(()=>{l()},[e]);const c=n||r||a?null:i.jsx(W,{}),d=a?i.jsx(le,{}):null,v=r?i.jsx(W,{}):null,h=a||r||!n?null:i.jsx(en,{movie:n});return i.jsxs("div",{className:"movieinfo",children:[c,d,v,h]})}const en=({movie:e})=>{const n=Me();return i.jsxs(i.Fragment,{children:[i.jsx("img",{src:e.backdrop_path,alt:"img"}),i.jsxs("div",{className:"hero__movie-descr",children:[i.jsx("h2",{children:e.name}),i.jsx("p",{children:e.description}),i.jsx("button",{className:"btn btn-secondary",onClick:()=>n(`/movie/${e.id}`),children:"Details"})]})]})},nn=({movie:e,onOpen:n})=>i.jsxs("div",{className:"movieitem",onClick:()=>n(e.id),children:[i.jsx("img",{src:e.poster_path,alt:e.title}),i.jsx("h2",{children:e.name.length>18?`${e.name.slice(0,18)}...`:e.name}),i.jsxs("div",{className:"movieitem-descr",children:[i.jsx("img",{src:"/date.svg",alt:""}),i.jsx("p",{children:e.release_date}),i.jsx("div",{className:"dot"}),i.jsx("p",{children:e.vote_average.toFixed(1)}),i.jsx("img",{src:"/star.svg",alt:""})]})]}),ln=()=>{const[e,n]=s.useState(!1),[t,o]=s.useState([]),[r,a]=s.useState(null),[l,c]=s.useState(2),[d,v]=s.useState(!1),{getTrandingMovies:h,getPopularMovies:C,loading:T,error:F}=ie(),j=()=>n(!1),{pathname:x}=Te(),K=b=>{n(!0),a(b)};let g;x==="/popular"?g=C:x==="/tranding"?g=h:g=C,s.useEffect(()=>{g&&g(l).then(b=>o([...t,...b])).finally(()=>{v(!1)})},[x,l]);const H=()=>{c(b=>b+1),v(!0),g(l)},R=F?i.jsx(le,{}):null,Y=T?i.jsx(W,{}):null;return i.jsxs("div",{className:"rowmovies",children:[i.jsxs("div",{className:"rowmovies__top",children:[i.jsxs("div",{className:"rowmovies__top-title",children:[i.jsx("img",{src:"/tranding.svg",alt:""}),i.jsx("h1",{children:x=="/tranding"?"Tranding":"Popular"})]}),i.jsx("div",{className:"hr"}),i.jsx("a",{href:"#",children:"See more"})]}),R,Y,i.jsx(tn,{movies:t,onOpen:K}),i.jsx("div",{className:"rowmovies__loadmore",children:i.jsx("button",{className:"btn btn-secondary",onClick:H,disabled:d,children:"Load More"})}),i.jsx(Ze,{open:e,onClose:j,children:i.jsx(_e,{movieId:r})})]})},tn=({movies:e,onOpen:n})=>i.jsx("div",{className:"rowmovies__lists",children:e.map(t=>i.jsx(nn,{movie:t,onOpen:n},t.id))});export{ln as R};
